<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Groups</title>
    <style>
        table { border-collapse: collapse; width: auto; } /* было 100% */
        td, th { border: 1px solid #ccc; padding: 4px 8px; white-space: nowrap; } /* компактнее */
        .row { margin: 10px 0; }
        .error { color: #b00020; margin-top: 6px; }

        .pager { display: flex; gap: 10px; align-items: center; margin-top: 12px; }
        .pager a, .pager span { padding: 6px 10px; border: 1px solid #ccc; text-decoration: none; }
        .pager .disabled { color: #888; border-color: #eee; }

        /* узкие столбцы */
        .col-number { min-width: 90px; text-align: left; }
        .col-count { min-width: 80px; text-align: center; }
        .col-action { min-width: 110px; text-align: center; }
    </style>
</head>
<body>

<h2>Список групп</h2>

<div class="row">
    <form th:action="@{/groups}" th:object="${createGroup}" method="post">
        <input type="hidden" name="page" th:value="${groupsPage.number}"/>

        <label for="number">Номер группы:</label>
        <input id="number"
               th:field="*{number}"
               inputmode="numeric"
               pattern="[0-9]+(-[0-9]+)?"
               placeholder="например 19-03"/>
        <button type="submit">Добавить новую группу</button>

        <div class="error"
             th:if="${#fields.hasErrors('number')}"
             th:errors="*{number}"></div>
    </form>
</div>

<table>
    <thead>
    <tr>
        <th class="col-number">Номер</th>
        <th class="col-count">Количество студентов</th>
        <th class="col-action">Редактировать</th>
    </tr>
    </thead>
    <tbody>
    <tr th:if="${groupsPage.totalElements == 0}">
        <td colspan="3">Пока нет групп</td>
    </tr>

    <tr th:each="g : ${groupsPage.content}">
        <td class="col-number" th:text="${g.number}"></td>
        <td class="col-count" th:text="${g.studentCount}"></td>
        <td class="col-action"><a th:href="@{|/groups/${g.id}|}">Edit</a></td>
    </tr>
    </tbody>
</table>

<div class="pager" th:if="${groupsPage.totalPages > 1}">
    <a th:if="${!groupsPage.first}"
       th:href="@{/groups(page=${groupsPage.number - 1})}">
        Назад
    </a>
    <span th:if="${groupsPage.first}" class="disabled">Назад</span>

    <span th:text="'Страница ' + (${groupsPage.number} + 1) + ' из ' + ${groupsPage.totalPages}"></span>

    <a th:if="${!groupsPage.last}"
       th:href="@{/groups(page=${groupsPage.number + 1})}">
        Вперёд
    </a>
    <span th:if="${groupsPage.last}" class="disabled">Вперёд</span>
</div>

</body>
</html>